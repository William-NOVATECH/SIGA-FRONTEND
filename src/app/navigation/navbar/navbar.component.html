<div class="siga-container">
  <!-- Header Superior -->
  <header class="siga-header">
    <div class="header-main">
      <div class="unam-brand">
        <img [src]="logoImage" alt="UNAM Logo" class="logo-img">
        <div class="unam-titles">
          <h1 class="system-title">Sistema Institucional Para La Gestión Académica (SIGA)</h1>
          <h2 class="portal-title">Portal Académico</h2>
        </div>
      </div>
      <div class="user-actions">
        <div class="user-info" *ngIf="currentUser">
          <div class="user-avatar">
            {{ userInitials }}
          </div>
          <div class="user-details">
            <span class="user-name">{{ currentUser.username }}</span>
            <span class="user-role" *ngIf="primaryRole">{{ primaryRole }}</span>
            <span class="user-email" *ngIf="!primaryRole">{{ currentUser.email }}</span>
          </div>
        </div>
        <button class="logout-btn" (click)="logOut()">
          <i class="pi pi-sign-out logout-icon"></i>
          Cerrar Sesión
        </button>
      </div>
    </div>
  </header>

  <div class="main-layout">
    <!-- Sidebar Menu -->
    <nav class="sidebar-menu">
      <div class="menu-header">
        <h3 class="menu-title">MENÚ PRINCIPAL</h3>
      </div>
      
      <ul class="menu-items">
        <!-- Items dinámicos según el rol del usuario -->
        <li *ngFor="let item of availableMenuItems" 
            class="menu-item" 
            [routerLink]="item.route"
            routerLinkActive="active">
          <i [class]="item.icon + ' menu-icon'"></i>
          <span class="menu-text">{{ item.title }}</span>
        </li>

        <!-- Mensaje para usuarios invitados sin acceso -->
        <li *ngIf="activeRoleId === 6 || (activeRoleId === null && availableMenuItems.length === 0)" 
            class="menu-item menu-item-disabled">
          <i class="pi pi-info-circle menu-icon"></i>
          <span class="menu-text">Esperando asignación de rol</span>
        </li>
      </ul>
    </nav>

    <!-- Main Content Area -->
    <main class="content-area-da">
      <div class="content-wrapper">
        <router-outlet></router-outlet>
        <!-- Footer - Al final del contenido, después del router-outlet -->
        <footer class="siga-footer">
          <div class="footer-content">
            <p class="footer-text">
              © 2025 - UNAM MANAGUA | UNIVERSIDAD DEL PUEBLO Y PARA EL PUEBLO!
            </p>
          </div>
        </footer>
      </div>
    </main>
  </div>
</div>
