<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="flex justify-between items-center">
      <div>
        <h1 class="header-title">Gestión de Departamentos</h1>
        <p class="header-subtitle">Administra los departamentos académicos de la institución</p>
      </div>
      <button 
        (click)="createDepartamento()"
        class="btn-primary"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
        Nuevo Departamento
      </button>
    </div>
  </div>

  <!-- Filtros -->
  <div class="filter-card">
    <div class="flex justify-between items-center mb-6">
      <h2 class="filter-title">
        <svg class="filter-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
        </svg>
        Filtros de Búsqueda
      </h2>
      <button 
        (click)="clearFilters()"
        class="btn-clear"
      >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
        Limpiar filtros
      </button>
    </div>

    <form [formGroup]="filterForm" class="grid grid-cols-1 lg:grid-cols-4 gap-6">
      <!-- Búsqueda -->
      <div class="form-group">
        <label class="form-label">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          Buscar
        </label>
        <div class="relative">
          <input 
            type="text" 
            formControlName="search"
            placeholder="Nombre, código..."
            class="form-input"
          >
          <div class="input-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
        </div>
      </div>

      <!-- Estado -->
      <div class="form-group">
        <label class="form-label">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Estado
        </label>
        <div class="relative">
          <select 
            formControlName="estado"
            class="form-select"
          >
            <option value="">Todos los estados</option>
            <option value="activo">Activo</option>
            <option value="inactivo">Inactivo</option>
          </select>
          <div class="input-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
        </div>
      </div>

      <!-- Ordenar por -->
      <div class="form-group">
        <label class="form-label">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"></path>
          </svg>
          Ordenar por
        </label>
        <div class="relative">
          <select 
            formControlName="orderBy"
            class="form-select"
          >
            <option value="nombre_departamento">Nombre</option>
            <option value="codigo_departamento">Código</option>
            <option value="id_departamento">ID</option>
          </select>
          <div class="input-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"></path>
            </svg>
          </div>
        </div>
      </div>

      <!-- Dirección orden -->
      <div class="form-group">
        <label class="form-label">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7l4-4m0 0l4 4m-4-4v18m0 0l-4-4m4 4l4-4"></path>
          </svg>
          Orden
        </label>
        <div class="relative">
          <select 
            formControlName="orderDirection"
            class="form-select"
          >
            <option value="ASC">Ascendente</option>
            <option value="DESC">Descendente</option>
          </select>
          <div class="input-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7l4-4m0 0l4 4m-4-4v18m0 0l-4-4m4 4l4-4"></path>
            </svg>
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- Tabla -->
  <div class="table-container">
    <!-- Header de Tabla -->
    <div class="table-header">
      <div class="flex justify-between items-center">
        <h3 class="table-title">Lista de Departamentos</h3>
        <div class="table-count">
          {{ departamentos.length }} de {{ totalItems }} registros
        </div>
      </div>
    </div>

    <!-- Tabla -->
    <div class="overflow-x-auto">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Departamento</th>
            <th>Código</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <!-- Estado de carga -->
          <tr *ngIf="loading">
            <td colspan="5">
              <div class="loading-container">
                <div class="loading-spinner"></div>
                <p class="text-gray-600 font-medium">Cargando departamentos...</p>
                <p class="text-gray-400 text-sm mt-1">Por favor espere</p>
              </div>
            </td>
          </tr>

          <!-- Filas de datos -->
          <tr *ngFor="let depto of departamentos" class="table-row">
            <td>
              <div class="id-badge">#{{ depto.id_departamento }}</div>
            </td>
            <td>
              <div class="department-cell">
                <div class="department-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                  </svg>
                </div>
                <div>
                  <div class="department-name">{{ depto.nombre_departamento }}</div>
                </div>
              </div>
            </td>
            <td>
              <span class="code-badge">{{ depto.codigo_departamento }}</span>
            </td>
            <td>
              <span 
                [class]="depto.estado === 'activo' ? 'status-badge status-active' : 'status-badge status-inactive'"
              >
                <span class="status-dot"></span>
                {{ depto.estado === 'activo' ? 'Activo' : 'Inactivo' }}
              </span>
            </td>
            <td>
              <div class="action-buttons">
                <button 
                  (click)="editDepartamento(depto.id_departamento)"
                  class="btn btn-edit"
                >
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                  </svg>
                  Editar
                </button>
                <button 
                  (click)="deleteDepartamento(depto.id_departamento)"
                  class="btn btn-delete"
                >
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                  </svg>
                  Eliminar
                </button>
              </div>
            </td>
          </tr>

          <!-- Estado vacío -->
          <tr *ngIf="!loading && departamentos.length === 0">
            <td colspan="5">
              <div class="empty-state">
                <div class="empty-icon">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                  </svg>
                </div>
                <h3 class="empty-title">No se encontraron departamentos</h3>
                <p class="empty-description">Intenta ajustar los filtros de búsqueda o crear un nuevo departamento.</p>
                <button 
                  (click)="createDepartamento()"
                  class="btn-primary"
                >
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                  </svg>
                  Crear primer departamento
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Paginación -->
    <div *ngIf="totalPages > 1 && !loading" class="pagination">
      <div class="pagination-info">
        Página {{ currentPage }} de {{ totalPages }} • {{ totalItems }} registros
      </div>
      <div class="pagination-controls">
        <button 
          (click)="onPageChange(currentPage - 1)"
          [disabled]="currentPage === 1"
          class="pagination-btn"
        >
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          Anterior
        </button>
        
        <div class="flex gap-1">
          <button 
            *ngFor="let page of pages" 
            (click)="onPageChange(page)"
            [class.active]="page === currentPage"
            class="page-btn"
          >
            {{ page }}
          </button>
        </div>

        <button 
          (click)="onPageChange(currentPage + 1)"
          [disabled]="currentPage === totalPages"
          class="pagination-btn"
        >
          Siguiente
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>